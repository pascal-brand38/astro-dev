---
// Copyright (c) Pascal Brand
// MIT License
//
// Implementation of https://leafletjs.com/examples/quick-start/ with astro-leaflet
//
// Differences:

import {
  Leaflet,
  Circle,
  Marker,
  Polygon,
  Popup,
} from "astro-leaflet";

---

<Leaflet
  id="map-quick-start"
  style=""
  options={{ center: [51.505, -0.09], zoom: 13 }}
>
    <Marker latlng={[51.5, -0.09]}>
      <Popup content="<b>Hello world!</b><br>I am a popup." open />
    </Marker>

    <Circle latlng={[51.508, -0.11]}, options={{
      color: 'red',
      fillColor: '#f03',
      fillOpacity: 0.5,
      radius: 500
      }}>
      <Popup content="I am a circle." />
    </Circle>

    <Polygon latlngs={[[51.509, -0.08], [51.503, -0.06], [51.51, -0.047]]}>
      <Popup content="I am a polygon." />
    </Polygon>

    <Popup latlng={[51.513, -0.09]} content="I am a standalone popup." />
</Leaflet>


<style is:global>
  #map-quick-start {
    height: 180px;
  }
</style>

<script>
  import { getMapFromId } from "astro-leaflet"
  import L from 'leaflet'

  window.addEventListener('load', () => {
    const map = getMapFromId('map-quick-start')

    if (map) {
      var popup = L.popup();
      function onMapClick(e: any) {
        popup
            .setLatLng(e.latlng)
            .setContent("You clicked the map at " + e.latlng.toString())
            .openOn(map);
      }
      map.on('click', onMapClick);
    }

  })


</script>