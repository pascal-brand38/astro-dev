---
// Copyright (c) Pascal Brand
// MIT License

import 'swiper/css'
import 'swiper/css/autoplay'
import type { SwiperOptions } from 'swiper/types'

const options: SwiperOptions = {
  a11y: {
    prevSlideMessage: 'Previous slide',
    nextSlideMessage: 'Next slide',
  },
  autoplay: {
    delay: 2000,
    disableOnInteraction: false,
    waitForTransition: false,
  },
  speed: 400,
  spaceBetween: 100,
  loop: true,
}
---

<!-- Slider main container -->
<astro-swiper class="swiper" data-options={JSON.stringify(options)}>
  <slot/>
</astro-swiper>



<script>
  // TODO: several swiper in the same page
  // TODO: dynamic Autoplay
  import Swiper from 'swiper'
  import { Autoplay } from 'swiper/modules'
  Swiper.use([Autoplay]);

  class AstroSwiper extends HTMLElement {
    constructor() {
      super();

      // Read the message from the data attribute.
      const options = JSON.parse(this.dataset.options || '')
      const swiper = new Swiper('.swiper', options)
    }
  }

  customElements.define('astro-swiper', AstroSwiper);
</script>
